  
ПОДРОБНАЯ ИНСТРУКЦИЯ ПО МОДИФИЦИРОВАНИЮ ИГРЫ DAY R SURVIVAL  
  
ВНИМАНИЕ!  
  
Информация представленная в этом документе предназначена [ТОЛЬКО для
личного использования и ТОЛЬКО в образовательных целях!]
Инструкция не распространяет, не модифицирует или обходит какие либо
защищённые авторским правом файлы, DRM защиту или системы
мультиплеера.  
Список инструментов представленных ниже, общедоступен и представлен КАК
ЕСТЬ.  
[Автор не несёт ответственности за последующее использование информации
пользователем!]
  
Модифицирование игры может привести к нарушению некоторых пунктов
пользовательского соглашения, ознакомьтесь с ним до использования
информации, представленной ниже!  
  
  
ТРЕБОВАНИЯ (Нужен ПК в большинстве случаев)  

- Python

- Java

- Lua (5.1.X или от движка игры (solar 2D))

- Некоторые знания языка программирования Lua

- Текстовый редактор (желательно с поддержкой синтаксиса, например
  Visual Studio Code)

- Corona-archiver.py

- Unluac.jar (или его альтернативы (luadec metaworm))

- АПК редактор

<!-- -->

- Termux (если нет ПК)

- Wine (если Операционная система не Windows)  
    
  Шаг I: начало  
    
  • Клонируйте этот репозиторий ([Angelix1/dayr: DAY R Survival Modding
  GuideGitHubhttps://github.com
  ](https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://github.com/Angelix1/dayr&ved=2ahUKEwilyOXb3-eMAxWaGRAIHRmrKZUQFnoECBoQAQ&usg=AOvVaw1bFmWHUOKzrvAQo3jnYfOb)[›](https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://github.com/Angelix1/dayr&ved=2ahUKEwilyOXb3-eMAxWaGRAIHRmrKZUQFnoECBoQAQ&usg=AOvVaw1bFmWHUOKzrvAQo3jnYfOb)[
  Angelix1](https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://github.com/Angelix1/dayr&ved=2ahUKEwilyOXb3-eMAxWaGRAIHRmrKZUQFnoECBoQAQ&usg=AOvVaw1bFmWHUOKzrvAQo3jnYfOb))
  или получите все нужные инструменты  
    
  Шаг II: создание рабочей папки  

<!-- -->

- Создайте рабочую папку

- В рабочей папке создайте ещё одну папку для экстракции файлов игры из
  архива (resource.car), назовите её originalLU

- Достаньте архив resource.car из игры (путь к нему:
  /assets/resource.car)

- Скопируйте resource.car в рабочую папку, где также должны находиться
  Unluac.jar и Corona-archiver.py  
    
  Шаг III: разархивирование resource.car  

<!-- -->

- Откройте консоль в рабочей папке, зажав shift + ПКМ, без выбора
  файлов. Появится опция: открыть командную строку по адресу папки.
  Нажмите её.

- Запустите разархивирование resource.car с помощью команды для консоли
  представленной ниже:  
    
  python corona-archiver.py -u resource.car originalLU  

<!-- -->

- Данная команда переместит содержимое из архива в originalLU  
    
  *\[ НЕОБЯЗАТЕЛЬНЫЕ ШАГИ \]*

<!-- -->

- Переименуйте скрипт corona-archiver.py в car.py чтобы вводить нужную
  команду быстрее

- Создавайте бэкап папки originalLU на случай непредвиденных ошибок
  которые не получается исправить, назовите его modifiedLU и используйте
  его вместо originalLU  
    
  Шаг IV: декомпиляция и модифицирование Lua файлов  

<!-- -->

- Выберите файл, который хотите модифицировать. Для примера я возьму
  lib.items.drink.lu . Скопируйте нужный файл в рабочую папку.

- Теперь выполните в консоли команду, данную ниже:  
    
  java -jar unluac.jar lib.items.drink.lu \> lib.items.drink.lua  
    
  Если всё было выполнено верно, появится новый файл с расширением .lua
  с тем же именем, что и предыдущий.  
    
  ***\[**В**Н**И**М**А**Н**И**Е**\]:*** избегайте файлы с \_method или
  \_master в их имени, так как их тяжелее всего правильно
  модифицировать, из-за тесного взаимодействия с базовыми (основными)
  механиками игры, в них очень легко что-нибудь сломать, а починить ---
  сложно.  
    
  Шаг V: Компилирование в .lu и архивирование в .car  
    
  • Вы можете использовать скрипт auto_pack.bat после его
  конфигурирования. Если хотите компилировать вручную используйте эту
  команду:  
    
  .\luac -o lib.items.drink.lu lib.items.drink.lua  
    
  • Появится новый файл с расширением .lu который и является вашим
  модифицированным файлом и он заменит предыдущий с тем же именем, если
  таковой был до этого  
  • После компиляции скопируйте его в originalLU, затем выполните
  команду ниже:  
    
  python corona-archiver.py -p originalLU resource.car  
    
  Или если вы выполнили второй необязательный шаг:  
    
  python corona-archiver.py -p modifiedLU resource.car  
    
  Шаг VI: конец  

<!-- -->

- После успешной упаковки resource.car, скопируйте модифицированный
  архив и замените им оригинальный архив внутри АПК файла игры

- После этого подпишите АПК файл, чтобы его можно было установить,
  используя MT manager на android или keystore на ПК

- Готово! Теперь можно установить и протестировать готовый АПК.  
    
    
    
  Частые ошибки/проблемы:  
    
  cannot find ... on ... --- неправильное имя файла или его отсутсвие  
    
  bad argument или chunk error --- скорее всего неправильная версия
  lua  
    
    
    
    
    
    
